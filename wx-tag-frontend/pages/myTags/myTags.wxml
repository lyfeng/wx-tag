<!--pages/myTags/myTags.wxml-->
<view class="page-container">
  <!-- è¿”å›é¦–é¡µæŒ‰é’® -->
  <view class="home-button" bindtap="goHome">
    <text class="home-icon">ğŸ </text>
  </view>

<scroll-view class="container" scroll-y="true" enable-back-to-top="true">

  <!-- åŠ è½½ä¸­ -->
  <view class="loading" wx:if="{{loading}}">
    <view class="weui-loading"></view>
  </view>

  <!-- ç”¨æˆ·ä¸ªäººä¿¡æ¯ -->
  <view class="user-profile" wx:if="{{!loading}}">
    <image class="large-avatar" src="{{userInfo.avatarUrl || '/images/empty.png'}}" mode="aspectFill" binderror="onUserAvatarError"></image>
    <view class="user-name">{{userInfo.nickname || 'å¾®ä¿¡ç”¨æˆ·'}}</view>
    <view class="tag-stats">
      <view class="stats-text">å·²æ”¶åˆ° {{tagData.tagCount || 0}} ä¸ªæ ‡ç­¾ï¼Œå…±æœ‰ {{tagData.tagUserCount || 0}} äººä¸ºä½ æ‰“æ ‡ç­¾</view>
    </view>
    <button class="share-btn" open-type="share">ç‚«ä¸€ç‚«æˆ‘æ”¶åˆ°çš„æ ‡ç­¾å§</button>
  </view>

  <!-- æ ‡ç­¾æ’è¡Œæ¦œ -->
  <view class="ranking-section" wx:if="{{!loading && tagStats.length > 0}}">
    <view class="section-title">æˆ‘çš„æ ‡ç­¾</view>
    <view class="tag-cloud">
      <view class="tag-cloud-item" wx:for="{{tagStats}}" wx:key="tagName">
        <text class="tag-cloud-name">{{item.tagName}}</text>
        <text class="tag-cloud-count">{{item.count}}</text>
      </view>
    </view>
  </view>

  <!-- AIåˆ†æè¯„è¯­ -->
  <view class="ai-section" wx:if="{{!loading && tagData.aiContent}}">
    <view class="section-title">AIåˆ†æè¯„è¯­</view>
    <view class="ai-content">
      <view class="comment-box">
        {{tagData.aiContent}}
      </view>
    </view>
  </view>

  <!-- æ ‡ç­¾æ˜ç»† -->
  <view class="detail-section" wx:if="{{!loading && tagData.userTagSummaryList.length > 0}}">
    <view class="section-title">æ ‡ç­¾æ˜ç»†</view>
    <view class="detail-list">
      <view class="detail-item" wx:for="{{tagData.userTagSummaryList}}" wx:key="userTagSummaryUuid">
        <view class="detail-left">
          <image class="tagger-avatar" src="{{item.taggerAvatarUrl || '/images/empty.png'}}" mode="aspectFill" binderror="onTaggerAvatarError" data-index="{{index}}"></image>
          <view class="tagger-info">
            <view class="tagger-name">{{item.taggerNickname}}</view>
            <view class="tag-time">{{item.formattedTime}}</view>
          </view>
        </view>
        <view class="detail-right">
          <view class="tags-container">
            <view class="tag-pill" wx:for="{{item.formattedTags}}" wx:for-item="tag" wx:key="name">{{tag.name}}</view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && (!tagData.userTagSummaryList || tagData.userTagSummaryList.length === 0)}}">
    <text class="empty-text-icon">ğŸ“</text>
    <text class="empty-text">è¿˜æ²¡æœ‰æ”¶åˆ°ä»»ä½•æ ‡ç­¾å“¦~</text>
  </view>
</scroll-view>
</view>